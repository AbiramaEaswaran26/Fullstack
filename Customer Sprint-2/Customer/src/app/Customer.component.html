<div class="customer-page">
  <div class="overlay"></div>

  <div class="form-section">
    <div class="form-container">
      <form #customerForm="ngForm" (ngSubmit)="register(customerForm)">
        <h2 class="form-title">Customer Details</h2>

        <div class="form-grid">
          <div>
            <label for="name">Name</label>
            <input
              id="name"
              required
              #name="ngModel"
              ngModel
              name="name"
              type="text"
              class="form-control"
              placeholder="Enter customer name"
            />
            <div *ngIf="name.invalid && name.touched">
              <small class="text-danger" *ngIf="name.errors?.['required']"
                >Required</small
              >
            </div>
          </div>

          <div>
            <label for="email">Email</label>
            <input
              id="email"
              required
              #email="ngModel"
              ngModel
              name="email"
              type="email"
              class="form-control"
              placeholder="Enter customer email"
            />
            <div *ngIf="email.invalid && email.touched">
              <small class="text-danger" *ngIf="email.errors?.['required']"
                >Required</small
              >
            </div>
          </div>

          <div>
            <label for="phone">Phone Number</label>
            <input
              id="phone"
              required
              #phone="ngModel"
              ngModel
              name="phone"
              type="text"
              class="form-control"
              placeholder="Enter customer phone number"
            />
            <div *ngIf="phone.invalid && phone.touched">
              <small class="text-danger" *ngIf="phone.errors?.['required']"
                >Required</small
              >
            </div>
          </div>

          <div>
            <label for="order_id">Order ID</label>
            <input
              id="order_id"
              required
              #orderId="ngModel"
              ngModel
              name="order_id"
              type="text"
              class="form-control"
              placeholder="Enter customer order id"
            />
            <div *ngIf="orderId.invalid && orderId.touched">
              <small class="text-danger" *ngIf="orderId.errors?.['required']"
                >Required</small
              >
            </div>
          </div>
        </div>

        <div class="form-actions">
          <button type="submit" class="btn-primary">Submit</button>
        </div>
      </form>
    </div>
  </div>

  <div class="table-section">
    <table class="styled-table">
      <thead>
        <tr>
          <th>ID</th>
          <th>Name</th>
          <th>Email</th>
          <th>Phone Number</th>
          <th>Order ID</th>
          <th>Edit</th>
          <th>Delete</th>
        </tr>
      </thead>
      <tbody>
        <tr *ngFor="let customer of customers">
          <td>{{ customer.id }}</td>
          <td>{{ customer.name }}</td>
          <td>{{ customer.email }}</td>
          <td>{{ customer.phone }}</td>
          <td>{{ customer.orderId }}</td>
          <td>
            <button
              class="btn-edit"
              data-bs-toggle="modal"
              data-bs-target="#editModal"
              (click)="edit(customer)"
            >
              Edit
            </button>
          </td>
          <td>
            <button class="btn-delete" (click)="deleteCustomer(customer)">
              Delete
            </button>
          </td>
        </tr>
      </tbody>
    </table>
  </div>

  <!-- Update Modal -->
  <div
    class="modal fade"
    id="editModal"
    tabindex="-1"
    aria-labelledby="editModalLabel"
    aria-hidden="true"
  >
    <div class="modal-dialog">
      <div class="modal-content glass-modal">
        <div class="modal-header">
          <h1 class="modal-title fs-5" id="editModalLabel">
            Update Customer
          </h1>
          <button
            type="button"
            class="btn-close"
            data-bs-dismiss="modal"
            aria-label="Close"
          ></button>
        </div>
        <div class="modal-body">
          <form #updateForm="ngForm" (ngSubmit)="updateCustomer()">
            <div class="form-grid">
              <div>
                <label for="name">Name</label>
                <input
                  id="name"
                  required
                  #name="ngModel"
                  [(ngModel)]="customerToUpdate.name"
                  name="name"
                  type="text"
                  class="form-control"
                  placeholder="Enter name"
                />
              </div>

              <div>
                <label for="email">Email</label>
                <input
                  id="email"
                  required
                  #email="ngModel"
                  [(ngModel)]="customerToUpdate.email"
                  name="email"
                  type="email"
                  class="form-control"
                  placeholder="Enter email"
                />
              </div>

              <div>
                <label for="phone">Phone Number</label>
                <input
                  id="phone"
                  required
                  #phone="ngModel"
                  [(ngModel)]="customerToUpdate.phone"
                  name="phone"
                  type="text"
                  class="form-control"
                  placeholder="Enter phone number"
                />
              </div>

              <div>
                <label for="order_id">Order ID</label>
                <input
                  id="order_id"
                  required
                  #order_id="ngModel"
                  [(ngModel)]="customerToUpdate.orderId"
                  name="order_id"
                  type="text"
                  class="form-control"
                  placeholder="Enter order id"
                />
              </div>
            </div>
            <div class="form-actions">
              <button type="submit" class="btn-primary">Update</button>
            </div>
          </form>
        </div>
      </div>
    </div>
  </div>
</div>